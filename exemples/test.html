<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>

  </body>
  <script src="https://thoriumcdn.herokuapp.com/cdn/thorium.js" type="text/javascript"></script>
  <script type="text/javascript">

    thorium.conf = {
      id : 'app',
      parent : document.body
    }

    thorium.onReady = function(_self){

      console.log(_self);

      _self.GUI([new App({
        prop : {id : "app"},
        childrens : [new Container({
          prop : {
            style : css({
              display : 'grid',
              width : '100%',
              height : '100%',
              background : 'red'
            }),
            hoverStyle : css({background : 'blue'}),
            activeStyle : css({background : 'yellow'})
          },
          childrens : [new Text('Hello','center')],
          proto : {
            test : 1,
            onMouseDown : function(){
              this.turnActive();
            }
          }
        })]
      })])
      .buildIn(document.body)
      .then(function(){
        _self.initialise()
      })

    }

  </script>
</html>

<!--

Style = function(arg = null){

  function style(cssArg,_self){

    const _this = this;

    if(_self)this.__proto__.element = _self;

    this.__proto__.toString = function(){return (this.element ? this.element.style.cssText : (function(self){
      return Array.from({length : Object.keys(self).length} , function(x,i){
        return `${Object.keys(self)[i]}:${Object.values(self)[i]};`
      }).join('');
    })(this))}

    this.__proto__.toJSON = function(){

      let cssArray = this.toString().split(' ').join('').split(';');
      return Array.from({length : cssArray.length} , function(x,i){
        let cssField = cssArray[i].split(':');
        if(cssField.length == 2)return { attr : cssField[0] , value : cssField[1] }
      }).filter((x,i) => x).reduce((acc,cur) => ({...acc , [cur.attr]:cur.value}) , {})
    }

    this.__proto__.Apply = function(){
      if(this.element) for(const i of Array.from({length : Object.keys(this).length} , (x,i) => i)){
        if(Object.keys(this)[i] in this.element.style)this.element.style[Object.keys(this)[i]] = Object.values(this)[i];
        else console.error(`${Object.keys(this)[i]} n'est pas une propiété valide.`);
      }
    }

    this.__proto__.Add = function(arg){

      if(typeof arg != 'object' && Array.isArray(arg))console.error(`arg doit être un object`);
      else for(const i of Array.from({length : Object.keys(arg).length} , (x,i) => i)){
        if(Object.keys(arg)[i] in this.element.style) {
          this[Object.keys(arg)[i]] = Object.values(arg)[i];
          this.element.style[Object.keys(arg)[i]] = Object.values(arg)[i];
        }
        else console.error(`${Object.keys(arg)[i]} n'est pas une propiété valide.`);
        if(i == Object.keys(arg).length - 1)return this;
      }

    }

    this.__proto__.Remove = function(arg){

      function rm(propName,self){
        if(propName in self){
          delete self[propName];
          self.element.style[propName] = "";
          return self;
        }
        else console.error(`${propName} n'est pas présent`);
      }

      if(!arg)console.error(`arg de Remove() ne peut être null`);
      if(typeof arg == 'string')rm(arg,this);
      else if(Array.isArray(arg)) for(const x of arg){rm(x,this)}

    }

    this.__proto__.Clear = function(){
      this.element.style = "";
    }

    this.__proto__.Reset = function(){
      if("_css" in this.element.th)this.element.Style(this.element.th._css.get());
    }

    this.__proto__._define = function(arg){
      if(typeof arg == "object" && !Array.isArray(arg))this.element.th._css.set(arg);
    }

    this.__proto__["@onActive"] = function(){
      if("activeStyle" in this.element.th)this.element.Style().Add(this.element.th.activeStyle.get())
    }

    this.__proto__["@onUnactive"] = function(){
      if("_css" in this.element.th)this.element.Style().Reset();
    }

    this.__proto__["@onHover"] = function(){
      if("hoverStyle" in this.element.th)this.element.Style().Add(this.element.th.hoverStyle.get())
    }

    this.__proto__["@onUnhover"] = function(){
      if("_css" in this.element.th)this.element.Style().Reset();
    }

    for(const i of Array.from({length : Object.keys((cssArg ? cssArg : _this.toJSON())).length} , (x,i) => i)){
      this[Object.keys((arg ? arg : _this.toJSON()))[i]] = Object.values((arg ? arg : _this.toJSON()))[i];
    }
    if(cssArg && typeof cssArg == 'object'){
      this.Clear();
      this.Apply();
    }

  }

  return new style(arg,this.e);

}

[
  { attr : height , value : "100%" },
  ...
]

{
  height : "100%",
  ...
}

-->
